<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Orbifolds and Other Games - The Python Toolbox</title>
    <meta name="description" content="">
    <meta name="author" content="Moshe Zadka">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="./theme/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="./theme/bootstrap.min.css" rel="stylesheet">
    <link href="./theme/bootstrap.min.responsive.css" rel="stylesheet">
    <link href="./theme/local.css" rel="stylesheet">
    <link href="./theme/pygments.css" rel="stylesheet">

    <!-- So Firefox can bookmark->"abo this site" -->
        <link href="https://orbifold.xyz/feeds/all.atom.xml" rel="alternate" title="Orbifolds and Other Games" type="application/atom+xml">

</head>

<body>

<div class="navbar">
    <div class="navbar-inner">
    <div class="container">

         <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
         </a>

        <a class="brand" href=".">Orbifolds and Other Games</a>

        <div class="nav-collapse">
        <ul class="nav">
            
            <li><a href="./pages/about.html">About</a></li>
        </ul>
        </div>
        
    </div>
    </div>
</div>

<div class="container">
    <div class="content">
    <div class="row">

        <div class="span9">
    <div class='article'>
        <div class="content-title">
            <h1>The Python Toolbox</h1>
Thu 01 February 2018

by <a class="url fn" href="./author/moshe-zadka.html">Moshe Zadka</a>
 


        </div>
	
        <div><p>I have written <a class="reference external" href="https://moshez.wordpress.com/2016/01/27/learning-python-the-ecosystem/">before</a> about Python tooling.
However,
as all software,
things have changed --
and I wanted to write a new post,
with my current understanding of best practices.</p>
<div class="section" id="testing">
<h2>Testing</h2>
<p>As of now, <code>pytest</code> has achieved official victory.
Unless there are overwhelming reasons to use something else,
strongly consider using it as your test runner.
The only good reason is an existing project,
with an existing test runner --
and even there,
checking if pytest will just run your tests as is is worthwhile.</p>
<p>Even when using Twisted,
unless you are implementing a new reactor,
tests should be using in-memory reactors --
so the usefulness of <code>trial</code> is limited.</p>
</div>
<div class="section" id="static-checking">
<h2>Static checking</h2>
<p>In the static checking arena,
<code>flake8</code>
and
<code>pylint</code>
are both still going strong.
There are less and less reasons not to use both,
especially if starting a project from scratch.</p>
<p>The <code>flake8</code> plugin ecosystem is rich,
and it is useful to look around and see if useful things are there.
For example, the <code>ebb-lint</code>
plugin is extremely strict about coding conventions --
hard to introduce to existing code bases,
but wonderful when starting out a new one.</p>
<p>In the meantime,
<code>pylint</code> has decent static code flow analysis
which can often prevent bugs.
Note,
however,
that Python static code analysis is hard,
and pylint is not perfect.
For example,
it will often strugle with <code>attrs</code>-based classes.</p>
<p>Last but not least,
<code>mypy</code> has made a showing in the field.
It supports both Python 2 an 3,
and allows annotating functions with types,
in order to find mismatches before running the code.
This is especially useful at API &quot;boundaries&quot;,
where the unit tests tend to cross less.</p>
</div>
<div class="section" id="test-metarunners">
<h2>Test metarunners</h2>
<p>The <code>tox</code> testing system is still the golden standard in Python.
It can test complicated dependency matrixes,
and allows configuring test commands flexibly.
Its documentation is somewhat lacking, sadly --
it is often the case new tricks are only apparently after reading
someone else's tox file.</p>
</div>
<div class="section" id="output">
<h2>Output</h2>
<p>Building wheels,
especially if the project has no native-code extensions,
is nowadays considered standard.
The best place to build wheels is in tox,
when configuring a test that will build a wheel,
install it,
and then test against the installed wheel.</p>
<p>The best and most reliable way to upload wheels,
and source distributions,
to PyPI is to use <code>twine</code>.
It used to be a good idea to test against the test PyPI server,
but nowadays it is best to set up a <code>devpi</code> server
for local testing.</p>
<p>When building applications,
<code>pex</code>
is a great output format.
It allows a one-file install.</p>
</div>
<div class="section" id="future">
<h2>Future</h2>
<p>The future is bright -- <code>pip</code> 10 is slated to come out,
supporting the <code>pyproject.toml</code> format --
and hopefully the next post in the series will explain how to make
packages using <code>flit</code>,
with no <code>setup.py</code>.</p>
</div>
</div>
	
        <hr>

    </div>
        </div>
        
        <div class="span3">

            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Site
                </li>
            
                <li><a href="./archives.html">Archives</a>
                <li><a href="./tags.html">Tags</a>



                <li><a href="https://orbifold.xyz/feeds/all.atom.xml" rel="alternate">Atom feed</a></li>

            </ul>
            </div>


            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Categories
                </li>
                
                <li><a href="./category/misc.html">misc</a></li>
                   
            </ul>
            </div>


            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Links
                </li>
            
                <li><a href="http://python.org/">Python.org</a></li>
                <li><a href="http://cobordism.com/">Moshe'z</a></li>
            </ul>
            </div>



        </div>  
    </div>     </div> 
<footer>
<br />
<p><a href=".">Orbifolds and Other Games</a> &copy; Moshe Zadka 2024</p>
</footer>

</div> <!-- /container -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="./theme/bootstrap-collapse.js"></script>
 
</body>
</html>